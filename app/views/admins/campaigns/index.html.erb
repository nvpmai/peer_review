<%= render 'new' %>
<div class="ui left floated vertical segment">
  <h1 class="ui header">Campaigns</h1>
</div>
<div class="ui right floated segment vertical">
  <a class="ui green button" onclick="showNewCampaignModal()">Add</a>
  <a class="ui red button" onclick="$('#form-campaigns-destroy').submit()">Delete</a>
</div>

<%= form_tag multiple_destroy_admins_campaigns_path, data: {confirm: 'Are you sure that you want to delete the campaigns?'},
             id: 'form-campaigns-destroy', method: :delete, remote: true do %>
  <table class="ui celled table">
    <thead>
      <tr>
        <th width="20px"></th>
        <th>Name</th>
        <th>Created at</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% @result.each do |campaign| %>
          <tr>
            <td>
              <%= check_box_tag 'campaign_ids[]', campaign.id, false, id: "campaign_#{campaign.id}" %>
            </td>
            <td><%= campaign.name %></td>
            <td><%= campaign.created_at.strftime("%d/%m/%Y") %></td>
            <td>
              <a class="ui teal button" href="admins/campaigns/<%= campaign.id %>/edit">Edit</a>
            </td>
          </tr>
      <% end %>
    </tbody>
    <tfoot>
      <tr>
        <th colspan="3">
          <div class="ui right floated pagination" id="pagination">
            <%= paginate @result %>
          </div>
        </th>
      </tr>
    </tfoot>
  </table>
<% end %>

<script>
  function showNewCampaignModal() {
    $('#new_campaign_modal').modal('show')
  }
</script>
